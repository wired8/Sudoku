(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{39:function(e,t,r){e.exports=r(57)},56:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),a=r(29),s=r.n(a),i=r(8),u=r(26),l=r(32),c="NEW_GAME",p="ENTER_VALUE",h="SOLVE",f="VALIDATE";function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=Object(i.c)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:t.type;var r=t.startBoard,n=t.errorCells;return v({},e,{currentBoard:Object(u.a)(r),originalBoard:Object(u.a)(r),errorCells:n,solved:!1});case h:t.type;return v({},e,{currentBoard:t.currentBoard,errorCells:[],solved:!0});case f:t.type;var o=t.errorCells,a=o?o.filter((function(e){return!0===e})).length:-1,s=e.currentBoard.filter((function(e){return 0!==e})).length;return v({},e,{errorCells:o,solved:0===a&&81===s});case p:t.type;var i=t.array_index,l=t.value,d=e.currentBoard;return d[i]=l,v({},e,{currentBoard:d});default:return e}}}),m=r(33),y=r(11),g=r(20),w=r(4),O=r(5),j=r(12),C=r(10),E=r(13),k=function(){function e(t,r,n){Object(w.a)(this,e),this.value=n||0,this.row=t,this.col=r,this.value="."===n||""===n?0:parseInt(n,10),this.possibleValues=[]}return Object(O.a)(e,[{key:"toString",value:function(){return this.value||"."}}]),e}();Array.prototype.flatten=function(){return[].concat.apply([],this)};var S=function(){for(var e=[],t=0;t<81;t++)e.push(".");return e.join("")}(),B=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;Object(w.a)(this,e),console.log(r),this.rows=[];for(var n=0;n<r.length;n++)n%9===0&&(t=[],this.rows.push(t)),t.push(new k(this.rows.length-1,t.length,r[n]))}return Object(O.a)(e,[{key:"toString",value:function(){for(var e="",t=0;t<this.rows.length;t++){0!==t&&t%3===0&&(e+="---------+---------+---------\n");for(var r=this.rows[t],n=0;n<r.length;n++)0!==n&&n%3===0&&(e+="|"),e+=" "+r[n].toString()+" ";e+="\n"}return e}},{key:"subgrids",value:function(){if(!this.grids){this.grids=[];for(var e=0;e<9;e+=3)for(var t=0;t<9;t+=3)this.grids.push(this.sameSubGridAs(new k(e,t)))}return this.grids}},{key:"columns",value:function(){if(!this._columns){this._columns=[];for(var e=0;e<9;e++)this._columns.push([]);this.rows.forEach((function(e){e.forEach((function(e,t){this._columns[t].push(e)}),this)}),this)}return this._columns}},{key:"sameRowAs",value:function(e){return this.rows[e.row]}},{key:"sameColAs",value:function(e){return this.columns()[e.col]}},{key:"sameSubGridAs",value:function(e){if(!e.subgrid){for(var t=function(e){return e<=2?0:e<=5?3:6},r=t(e.row),n=t(e.col),o=[],a=r;a<r+3;a++){for(var s=this.rows[a],i=[],u=n;u<n+3;u++)i.push(s[u]);o.push(i)}e.subgrid=o}return e.subgrid}},{key:"unsolved",value:function(){return this.rows.flatten().filter((function(e){return 0===e.value}))}},{key:"isSolved",value:function(){return!this.rows.flatten().some((function(e){return 0===e.value}))}},{key:"peers",value:function(e){return e.peers||(e.peers=Array.from(new Set(this.sameColAs(e).concat(this.sameRowAs(e)).concat(this.sameSubGridAs(e).flatten()).filter((function(t){return t!==e}))))),e.peers}},{key:"toFlatString",value:function(){return this.rows.flatten().map((function(e){return e.toString()})).join("")}}]),e}(),N=(r(56),function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(O.a)(t,[{key:"fireOnChange",value:function(e){var t=e.target.value;console.log("value:",t),(this.isInt(t)||""===t)&&this.props.onCellValueChange(this.props.row,this.props.col,e.target.value)}},{key:"isInt",value:function(e){return!isNaN(e)&&(0|(t=parseFloat(e)))===t;var t}},{key:"render",value:function(){var e=this.props.value;return o.a.createElement("input",{type:"tel",value:this.isInt(e)&&0!==e?e:"",maxLength:"1",onChange:this.fireOnChange.bind(this),className:this.getCellStyling(this.props.row,this.props.col),id:this.props.id})}},{key:"getCellStyling",value:function(e,t){var r=this.props.currentBoard,n=9*e+t;return this.props.currentBoard&&this.props.currentBoard[n]&&this.props.isSolved?"solved-cell":this.props.errorCells&&this.props.errorCells[n]?"invalid-cell":r&&0===r[n]?null:"valid-cell"}}]),t}(n.Component)),A=function(e){function t(){return Object(w.a)(this,t),Object(j.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=new B(this.props.board.currentBoard),r=0;return o.a.createElement("div",{className:"sudoku-board"},o.a.createElement("table",{id:"grid"},o.a.createElement("tbody",null,t.rows.map((function(t,n){return o.a.createElement("tr",{key:n},t.map((function(t){return o.a.createElement("td",{key:t.col},o.a.createElement(N,{value:t.value,row:t.row,col:t.col,id:"cell-".concat(r++),currentBoard:e.props.board.currentBoard,errorCells:e.props.board.errorCells,isSolved:e.props.board.solved,onCellValueChange:e.props.onCellValueChange}))})))})))))}}]),t}(n.Component);var V=Object(y.b)((function(e){return{board:e.board}}))(A),I=function(e,t){return{type:c,startBoard:e,errorCells:t}},G=function(e){return{type:h,currentBoard:e}},_=function(e){return{type:f,errorCells:e}};var P=function(e){function t(e){return Object(w.a)(this,t),Object(j.a)(this,Object(C.a)(t).call(this,e))}return Object(E.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){this.props.NewGame()}},{key:"solve",value:function(){this.props.Solve(this.props.board.originalBoard)}},{key:"onCellValueEdited",value:function(e,t,r){var n=9*e+t;this.isInt(r)||(r=0),this.props.dispatch(function(e,t){return{type:p,array_index:e,value:t}}(n,parseInt(r,10))),this.props.Validate(this.props.board.currentBoard)}},{key:"newGame",value:function(){this.props.NewGame()}},{key:"isInt",value:function(e){return!isNaN(e)&&(0|(t=parseFloat(e)))===t;var t}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"heading"},o.a.createElement("h1",null,"Sudoku"),o.a.createElement(V,{onCellValueChange:this.onCellValueEdited.bind(this)}),o.a.createElement("div",{className:"buttons-container"},o.a.createElement("button",{className:"button",onClick:function(){return e.solve()}},o.a.createElement("span",null,"Solve!")),o.a.createElement("button",{className:"button",onClick:function(){return e.newGame()}},o.a.createElement("span",null,"New Game"))))}}]),t}(n.Component);var T=Object(y.b)((function(e){return{board:e.board}}),(function(e){return{NewGame:function(t){return e((function(e){return e({type:"GET_NEW_BOARD"}),fetch("http://localhost:3001/api/v1/game").then((function(e){return e.json()})).then((function(t){return e(I(t.board))}))}))},Solve:function(t){return e((r=t,function(e){e({type:"SOLVE"});var t=encodeURIComponent(r),n="puzzle=".concat(t);return fetch("http://localhost:3001/api/v1/game/solve",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then((function(e){return e.json()})).then((function(t){return e(G(t.board))}))}));var r},Validate:function(t){return e((r=t,function(e){e({type:"VALIDATE"});var t=encodeURIComponent(r),n="puzzle=".concat(t);return fetch("http://localhost:3001/api/v1/game/validate",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}).then((function(e){return e.json()})).then((function(t){return e(_(t.errors))}))}));var r},dispatch:e}}))(P),x=function(e){var t=e.store;return o.a.createElement("div",null,o.a.createElement(y.a,{store:t},o.a.createElement(g.b,{history:g.c},o.a.createElement(g.a,{exact:!0,path:"/",component:T}))))},D=Object(i.d)(b,{board:{currentBoard:[],startBoard:[],errorCells:[],solved:!1}},Object(i.a)(m.a));s.a.render(o.a.createElement(x,{store:D}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.589e08bb.chunk.js.map